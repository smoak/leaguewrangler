(this.webpackJsonpleaguewrangler=this.webpackJsonpleaguewrangler||[]).push([[0],{177:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"session",(function(){return rt}));var r,c,s=a(39),i=a(217),o=a(128),l=a(40),j=a(126),u=a(129),d=a(0),b=a(21),m=a(29),O=a.n(m),v=a(76),h=a(106),p=a.n(h),g=a(107),f=a.n(g),x=a(127),w=Object(x.a)({palette:{primary:p.a,secondary:f.a}}),N=function(e){return!!e.session.userToken},S=a(218),k=a(120),y=a(12),I=a(202),C=a(8),T=a(49),U=a(210),E=a(211),R=a(36),A=a(219),L=Object(A.a)(r||(r=Object(R.a)(["\n  query GetCurrentUserEvents {\n    currentUser {\n      events {\n        id: eventId\n        title\n        endTimestamp\n        startTimestamp\n        viewerRsvpStatus\n        team {\n          id: teamId\n          shortName\n          photoThumbnailUrl\n        }\n        location {\n          name\n          address\n          googleMapsUrl\n        }\n      }\n    }\n  }\n"]))),B=a(206),$=a(222),P=a(207),W=a(208),M=a(205),Y=a(108),D=a.n(Y),F=a(203);!function(e){e.AVAILABLE="AVAILABLE",e.MAYBE="MAYBE",e.NO="NO",e.NONE="NONE",e.YES="YES"}(c||(c={}));var q,_=a(201),G=a(111),z=a.n(G),J=a(109),K=a.n(J),V=a(3),Q=function(e){var t=e.className,a=e.isNotPlaying,n=e.onRsvp,r=Object(d.useCallback)((function(){n(c.NO)}),[n]),s=a?Object(V.jsx)(K.a,{className:t,color:"primary"}):Object(V.jsx)(z.a,{className:t});return Object(V.jsx)(_.a,{"aria-label":"Not Playing",onClick:r,children:s})},H=a(113),X=a.n(H),Z=a(112),ee=a.n(Z),te=function(e){var t=e.isPlaying,a=e.className,n=e.onRsvp,r=Object(d.useCallback)((function(){n(c.YES)}),[n]),s=t?Object(V.jsx)(ee.a,{className:a,color:"primary"}):Object(V.jsx)(X.a,{className:a});return Object(V.jsx)(_.a,{"aria-label":"Playing",onClick:r,children:s})},ae=a(115),ne=a.n(ae),re=a(114),ce=a.n(re),se=function(e){var t=e.onRsvp,a=e.className,n=e.isTentative,r=Object(d.useCallback)((function(){t(c.MAYBE)}),[t]),s=n?Object(V.jsx)(ce.a,{className:a,color:"primary"}):Object(V.jsx)(ne.a,{className:a});return Object(V.jsx)(_.a,{"aria-label":"Tentative",onClick:r,children:s})},ie=a(51),oe=Object(A.a)(q||(q=Object(R.a)(["\n  mutation SaveEventRsvp($eventId: Int!, $rsvpStatus: RsvpStatus!, $teamId: Int!, $comments: String) {\n    saveRsvp(comments: $comments, eventId: $eventId, rsvpStatus: $rsvpStatus, teamId: $teamId) {\n      id: eventId\n      viewerRsvpStatus\n    }\n  }\n"]))),le=Object(I.a)({icon:{fontSize:40}}),je=Object(C.a)(le)((function(e){var t=e.classes,a=e.eventId,n=e.teamId,r=e.rsvpStatus,s=function(e){var t=e.eventId,a=e.teamId,n=Object(T.a)(oe),r=Object(ie.a)(n,2),c=r[0];return{loading:r[1].loading,saveRsvpCallback:Object(d.useCallback)((function(e){c({variables:{eventId:t,teamId:a,rsvpStatus:e}})}),[t,a,c])}}({teamId:n,eventId:a}),i=s.loading,o=s.saveRsvpCallback;return i?Object(V.jsx)(F.a,{className:t.icon,color:"secondary"}):Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(te,{className:t.icon,isPlaying:r===c.YES,onRsvp:o}),Object(V.jsx)(se,{className:t.icon,isTentative:r===c.MAYBE,onRsvp:o}),Object(V.jsx)(Q,{className:t.icon,isNotPlaying:r===c.NO,onRsvp:o})]})})),ue=a(204),de=a(54),be=function(e){var t=e.locationName,a=e.locationUrl;return a||de.a,Object(V.jsx)(de.a,{component:"p",children:Object(V.jsx)(ue.a,{href:a,target:"_blank",rel:"noreferrer",children:t})})},me=Object(C.a)((function(){return Object(I.a)({card:{width:"100%"}})}))((function(e){var t=e.classes,a=e.eventId,n=e.location,r=e.locationMapsUrl,c=e.rsvpStatus,s=e.startTime,i=e.teamId,o=e.teamPhotoUrl,l=e.title,j=s?Object(V.jsx)(D.a,{format:"LLLL",date:s}):null;return Object(V.jsxs)(M.a,{className:t.card,children:[Object(V.jsx)(B.a,{avatar:Object(V.jsx)($.a,{"aria-label":"teamPhoto",src:o||""}),title:l,subheader:j}),Object(V.jsx)(P.a,{children:Object(V.jsx)(be,{locationName:n,locationUrl:r})}),Object(V.jsx)(W.a,{children:Object(V.jsx)(je,{rsvpStatus:c,teamId:i,eventId:a})})]})})),Oe=a(209),ve=Object(C.a)((function(){return Object(I.a)({card:{maxWidth:354,width:"100%"}})}))((function(e){var t=e.classes.card,a=Object(V.jsx)(Oe.a,{height:6}),n=Object(V.jsx)(Oe.a,{height:6,width:"80%"});return Object(V.jsxs)(M.a,{className:t,children:[Object(V.jsx)(B.a,{avatar:Object(V.jsx)(Oe.a,{variant:"circle",width:40,height:40}),title:a,subheader:n}),Object(V.jsx)(P.a,{children:Object(V.jsx)(Oe.a,{variant:"rect",height:50})}),Object(V.jsx)(W.a,{children:Object(V.jsx)(_.a,{children:Object(V.jsx)(Oe.a,{variant:"rect"})})})]})}));function he(e){return null!==e&&void 0!==e}var pe,ge,fe=function(){var e=Object(T.b)(L),t=e.loading,a=e.data,n=e.error;if(t)return Object(V.jsx)(ve,{});if(n||!a)return Object(V.jsx)(V.Fragment,{children:"Some error"});var r=a.currentUser.events.filter(he);return r.length>0?Object(V.jsx)(U.a,{children:r.map((function(e){var t,a;return Object(V.jsx)(E.a,{children:Object(V.jsx)(me,{eventId:e.id,teamId:e.team.id,title:e.title,teamPhotoUrl:e.team.photoThumbnailUrl,location:e.location?e.location.name:"",locationMapsUrl:null!==(t=null===(a=e.location)||void 0===a?void 0:a.googleMapsUrl)&&void 0!==t?t:void 0,startTime:e.startTimestamp?new Date(1e3*e.startTimestamp):void 0,rsvpStatus:e.viewerRsvpStatus})},e.id)}))}):Object(V.jsx)(V.Fragment,{children:"No events scheduled"})},xe=Object(C.a)((function(e){return Object(I.a)({main:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:e.spacing(2)}})}))((function(e){var t=e.classes;return Object(V.jsx)("div",{className:t.main,children:Object(V.jsx)(fe,{})})})),we=function(){return Object(V.jsx)(k.a,{children:Object(V.jsx)(y.c,{children:Object(V.jsx)(y.a,{exact:!0,path:"/",component:xe})})})},Ne=function(){return Object(V.jsx)(we,{})},Se=a(212),ke=a(213),ye=a(122),Ie=a.n(ye),Ce=a(121),Te=a.n(Ce),Ue=Object(A.a)(pe||(pe=Object(R.a)(["\n  query GetUserAvatar {\n    currentUser {\n      profilePhotoThumbnailUrl\n    }\n  }\n"]))),Ee=Object(I.a)({avatar:{margin:10}}),Re=Object(C.a)(Ee)((function(e){var t=e.classes,a=Object(T.b)(Ue),n=a.loading,r=a.data;return n?Object(V.jsx)(F.a,{color:"secondary"}):r&&r.currentUser?Object(V.jsx)($.a,{src:r.currentUser.profilePhotoThumbnailUrl,className:t.avatar}):Object(V.jsx)(Te.a,{})})),Ae=Object(I.a)({menuButton:{marginLeft:-12,marginRight:20},grow:{flexGrow:1}}),Le=Object(C.a)(Ae)((function(e){var t=e.classes;return Object(V.jsx)(Se.a,{position:"static",children:Object(V.jsxs)(ke.a,{children:[Object(V.jsx)(_.a,{className:t.menuButton,color:"inherit","aria-label":"Menu",children:Object(V.jsx)(Ie.a,{})}),Object(V.jsx)(de.a,{variant:"h6",color:"inherit",className:t.grow,children:"League Wrangler"}),Object(V.jsx)(Re,{})]})})})),Be=a(131),$e=a(124),Pe=a.n($e),We=a(123),Me=a.n(We),Ye=a(215),De=a(223),Fe=a(221),qe=a(216),_e=a(220),Ge="userToken",ze=Object(A.a)(ge||(ge=Object(R.a)(["\n  mutation CreateUserToken($username: String!, $password: String!) {\n    createUserToken(username: $username, password: $password) {\n      token\n    }\n  }\n"]))),Je=a(214),Ke=function(e){var t=e.className,a=e.isDisabled,n=e.onClick;return Object(V.jsx)(Je.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t,onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){e.preventDefault(),n()})),disabled:a,children:"Sign in"})},Ve=function(e){var t=Object(d.useState)(e),a=Object(ie.a)(t,2),n=a[0],r=a[1];return{value:n,onChange:Object(d.useCallback)((function(e){r(e.target.value)}),[])}},Qe=function(e){var t,a=e.submitButtonClassname,n=e.formClassname,r=Ve(""),c=r.value,s=r.onChange,i=Ve(""),o=i.value,l=i.onChange,j=Object(T.a)(ze),u=Object(ie.a)(j,2),b=u[0],m=u[1],O=m.data,v=m.error,h=m.loading,p=Object(d.useCallback)((function(){b({variables:{username:c,password:o}})}),[b,c,o]);O&&O.createUserToken&&(t=O.createUserToken.token,localStorage.setItem(Ge,t),window.location.reload());var g=h?Object(V.jsx)(F.a,{color:"secondary"}):Object(V.jsx)(Ke,{onClick:p,isDisabled:!c||!o,className:a});return Object(V.jsxs)("div",{className:n,children:[Object(V.jsxs)(Ye.a,{margin:"normal",required:!0,fullWidth:!0,error:!!v,children:[Object(V.jsx)(De.a,{htmlFor:"username",children:"Username"}),Object(V.jsx)(Fe.a,{id:"username",name:"username",autoComplete:"username",autoFocus:!0,value:c,onChange:s})]}),Object(V.jsxs)(Ye.a,{margin:"normal",required:!0,fullWidth:!0,error:!!v,children:[Object(V.jsx)(De.a,{htmlFor:"password",children:"Password"}),Object(V.jsx)(Fe.a,{name:"password",type:"password",id:"password",autoComplete:"current-password",value:o,onChange:l})]}),Object(V.jsx)(qe.a,{control:Object(V.jsx)(_e.a,{value:"remember",color:"primary"}),label:"Remember me"}),g]})},He=a(69),Xe=Pe()((function(e){return Object(I.a)({main:Object(He.a)({width:"auto",display:"block",marginLeft:e.spacing(3),marginRight:e.spacing(3)},e.breakpoints.up(400+e.spacing(6)),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(e.spacing(2),"px ").concat(e.spacing(3),"px ").concat(e.spacing(3),"px")},avatar:{margin:e.spacing(),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing()},submit:{marginTop:e.spacing(3)}})}))((function(e){var t=e.classes;return Object(V.jsx)("div",{className:t.main,children:Object(V.jsxs)(Be.a,{className:t.paper,children:[Object(V.jsx)($.a,{className:t.avatar,children:Object(V.jsx)(Me.a,{})}),Object(V.jsx)(de.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(V.jsx)(Qe,{formClassname:t.form,submitButtonClassname:t.submit})]})})})),Ze=function(e){var t=e.isAuthenticated;return Object(V.jsxs)("div",{children:[Object(V.jsx)(S.a,{}),Object(V.jsx)(Le,{}),t?Object(V.jsx)(Ne,{}):Object(V.jsx)(Xe,{})]})},et=Object(v.b)((function(e){return{isAuthenticated:N(e)}}))(Ze),tt=a(77),at=a(125),nt={},rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SESSION.SET_USER_TOKEN":return Object(s.a)(Object(s.a)({},e),{},{userToken:t.payload});default:return e}},ct=function(){var e=Object(tt.combineReducers)(Object(s.a)({},n)),t=Object(at.composeWithDevTools)();return Object(tt.createStore)(e,t)},st=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function it(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ot=ct(),lt=localStorage.getItem(Ge),jt=Object(u.a)({uri:"/graphql"}),ut=Object(j.a)((function(e,t){var a=t.headers;return{headers:Object(s.a)(Object(s.a)({},a),{},{authorization:lt?"Bearer ".concat(lt):""})}})),dt=new l.a({link:ut.concat(jt),cache:new o.a});lt&&ot.dispatch({type:"SESSION.SET_USER_TOKEN",payload:lt}),O.a.render(Object(V.jsx)(b.a,{client:dt,children:Object(V.jsx)(i.a,{theme:w,children:Object(V.jsx)(v.a,{store:ot,children:Object(V.jsx)(et,{})})})}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");st?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):it(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):it(e)}))}}()}},[[177,1,2]]]);
//# sourceMappingURL=main.09850377.chunk.js.map