(this.webpackJsonpleaguewrangler=this.webpackJsonpleaguewrangler||[]).push([[0],{225:function(e,t,a){e.exports=a(347)},347:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"session",(function(){return Ke}));var r=a(44),c=a(14),l=a(38),i=a(29),o=a(142),s=a(43),u=a(0),m=a.n(u),d=a(18),v=a(55),p=a.n(v),g=a(76),E=a(125),f=a.n(E),h=a(126),b=a.n(h),w=Object(c.createMuiTheme)({palette:{primary:f.a,secondary:b.a},typography:{useNextVariants:!0}}),O=function(e){return!!e.session.userToken},S=a(71),j=a.n(S),y=a(136),N=a(36),k=a(47),I=a(7),T=a(34),C=a(35);function R(){var e=Object(T.a)(["\n  query GetCurrentUserEvents {\n    currentUser {\n      events {\n        id: eventId\n        title\n        endTimestamp\n        startTimestamp\n        viewerRsvpStatus\n        team {\n          id: teamId\n          shortName\n          photoThumbnailUrl\n        }\n        location {\n          name\n          address\n          googleMapsUrl\n        }\n      }\n    }\n  }\n"]);return R=function(){return e},e}var U,A=Object(C.a)(R()),L=a(42),B=a.n(L),P=a(129),$=a.n(P);!function(e){e.AVAILABLE="AVAILABLE",e.MAYBE="MAYBE",e.NO="NO",e.NONE="NONE",e.YES="YES"}(U||(U={}));var x=a(131),W=a.n(x),M=a(130),Y=a.n(M),D=function(e){var t=e.className,a=e.isNotPlaying,n=e.onRsvp,r=Object(u.useCallback)((function(){n(U.NO)}),[n]),c=a?m.a.createElement(Y.a,{className:t,color:"primary"}):m.a.createElement(W.a,{className:t});return m.a.createElement(I.j,{"aria-label":"Not Playing",onClick:r},c)},F=a(133),q=a.n(F),_=a(132),G=a.n(_),V=function(e){var t=e.isPlaying,a=e.className,n=e.onRsvp,r=Object(u.useCallback)((function(){n(U.YES)}),[n]),c=t?m.a.createElement(G.a,{className:a,color:"primary"}):m.a.createElement(q.a,{className:a});return m.a.createElement(I.j,{"aria-label":"Playing",onClick:r},c)},z=a(135),J=a.n(z),K=a(134),Q=a.n(K),H=function(e){var t=e.onRsvp,a=e.className,n=e.isTentative,r=Object(u.useCallback)((function(){t(U.MAYBE)}),[t]),c=n?m.a.createElement(Q.a,{className:a,color:"primary"}):m.a.createElement(J.a,{className:a});return m.a.createElement(I.j,{"aria-label":"Tentative",onClick:r},c)},X=a(48);function Z(){var e=Object(T.a)(["\n  mutation SaveEventRsvp($eventId: Int!, $rsvpStatus: RsvpStatus!, $teamId: Int!, $comments: String) {\n    saveRsvp(comments: $comments, eventId: $eventId, rsvpStatus: $rsvpStatus, teamId: $teamId) {\n      id: eventId\n      viewerRsvpStatus\n    }\n  }\n"]);return Z=function(){return e},e}var ee=Object(C.a)(Z()),te=Object(c.createStyles)({icon:{fontSize:40}}),ae=Object(c.withStyles)(te)((function(e){var t=e.classes,a=e.eventId,n=e.teamId,r=e.rsvpStatus,c=function(e){var t=e.eventId,a=e.teamId,n=Object(k.a)(ee),r=Object(X.a)(n,2),c=r[0];return{loading:r[1].loading,saveRsvpCallback:Object(u.useCallback)((function(e){c({variables:{eventId:t,teamId:a,rsvpStatus:e}})}),[t,a,c])}}({teamId:n,eventId:a}),l=c.loading,i=c.saveRsvpCallback;return l?m.a.createElement(I.g,{className:t.icon,color:"secondary"}):m.a.createElement(m.a.Fragment,null,m.a.createElement(V,{className:t.icon,isPlaying:r===U.YES,onRsvp:i}),m.a.createElement(H,{className:t.icon,isTentative:r===U.MAYBE,onRsvp:i}),m.a.createElement(D,{className:t.icon,isNotPlaying:r===U.NO,onRsvp:i}))})),ne=Object(c.withStyles)((function(){return Object(c.createStyles)({card:{width:"100%"}})}))((function(e){var t=e.classes,a=e.eventId,n=e.location,r=e.rsvpStatus,c=e.startTime,l=e.teamId,i=e.teamPhotoUrl,o=e.title,s=c?m.a.createElement($.a,{format:"LLLL",date:c}):null;return m.a.createElement(B.a,{className:t.card},m.a.createElement(I.e,{avatar:m.a.createElement(I.a,{"aria-label":"teamPhoto",src:i||""}),title:o,subheader:s}),m.a.createElement(I.d,null,m.a.createElement(I.p,{component:"p"},n)),m.a.createElement(I.c,null,m.a.createElement(ae,{rsvpStatus:r,teamId:l,eventId:a})))})),re=a(66),ce=a.n(re),le=a(67),ie=a.n(le),oe=a(68),se=a.n(oe),ue=a(37),me=a.n(ue),de=a(350),ve=Object(c.withStyles)((function(){return Object(c.createStyles)({card:{maxWidth:354,width:"100%"}})}))((function(e){var t=e.classes.card,a=m.a.createElement(de.a,{height:6}),n=m.a.createElement(de.a,{height:6,width:"80%"});return m.a.createElement(B.a,{className:t},m.a.createElement(se.a,{avatar:m.a.createElement(de.a,{variant:"circle",width:40,height:40}),title:a,subheader:n}),m.a.createElement(ie.a,null,m.a.createElement(de.a,{variant:"rect",height:50})),m.a.createElement(ce.a,null,m.a.createElement(me.a,null,m.a.createElement(de.a,{variant:"rect"}))))}));function pe(e){return null!==e&&void 0!==e}var ge=function(){var e=Object(k.b)(A),t=e.loading,a=e.data,n=e.error;if(t)return m.a.createElement(ve,null);if(n||!a)return m.a.createElement(m.a.Fragment,null,"Some error");var r=a.currentUser.events.filter(pe);return r.length>0?m.a.createElement(I.m,null,r.map((function(e){return m.a.createElement(I.n,{key:e.id},m.a.createElement(ne,{eventId:e.id,teamId:e.team.id,title:e.title,teamPhotoUrl:e.team.photoThumbnailUrl,location:e.location?e.location.name:"",startTime:e.startTimestamp?new Date(1e3*e.startTimestamp):void 0,rsvpStatus:e.viewerRsvpStatus}))}))):m.a.createElement(m.a.Fragment,null,"No events scheduled")},Ee=Object(c.withStyles)((function(e){return Object(c.createStyles)({main:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:2*e.spacing.unit}})}))((function(e){var t=e.classes;return m.a.createElement("div",{className:t.main},m.a.createElement(ge,null))})),fe=function(){return m.a.createElement(y.a,null,m.a.createElement(N.c,null,m.a.createElement(N.a,{exact:!0,path:"/",component:Ee})))},he=function(){return m.a.createElement(fe,null)},be=a(69),we=a.n(be),Oe=a(70),Se=a.n(Oe),je=a(139),ye=a.n(je),Ne=a(138),ke=a.n(Ne);function Ie(){var e=Object(T.a)(["\n  query GetUserAvatar {\n    currentUser {\n      profilePhotoThumbnailUrl\n    }\n  }\n"]);return Ie=function(){return e},e}var Te=Object(C.a)(Ie()),Ce=Object(c.createStyles)({avatar:{margin:10}}),Re=Object(c.withStyles)(Ce)((function(e){var t=e.classes,a=Object(k.b)(Te),n=a.loading,r=a.data;return n?m.a.createElement(I.g,{color:"secondary"}):r&&r.currentUser?m.a.createElement(I.a,{src:r.currentUser.profilePhotoThumbnailUrl,className:t.avatar}):m.a.createElement(ke.a,null)})),Ue=Object(c.createStyles)({menuButton:{marginLeft:-12,marginRight:20},grow:{flexGrow:1}}),Ae=Object(c.withStyles)(Ue)((function(e){var t=e.classes;return m.a.createElement(we.a,{position:"static"},m.a.createElement(Se.a,null,m.a.createElement(me.a,{className:t.menuButton,color:"inherit","aria-label":"Menu"},m.a.createElement(ye.a,null)),m.a.createElement(I.p,{variant:"h6",color:"inherit",className:t.grow},"League Wrangler"),m.a.createElement(Re,null)))})),Le=a(9),Be=a.n(Le),Pe=a(140),$e=a.n(Pe);function xe(){var e=Object(T.a)(["\n  mutation CreateUserToken($username: String!, $password: String!) {\n    createUserToken(username: $username, password: $password) {\n      token\n    }\n  }\n"]);return xe=function(){return e},e}var We=Object(C.a)(xe()),Me=function(e){var t=e.className,a=e.isDisabled,n=e.onClick;return m.a.createElement(I.b,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t,onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){e.preventDefault(),n()})),disabled:a},"Sign in")},Ye=function(e){var t=Object(u.useState)(e),a=Object(X.a)(t,2),n=a[0],r=a[1];return{value:n,onChange:Object(u.useCallback)((function(e){r(e.target.value)}),[])}},De=function(e){var t,a=e.submitButtonClassname,n=e.formClassname,r=Ye(""),c=r.value,l=r.onChange,i=Ye(""),o=i.value,s=i.onChange,d=Object(k.a)(We),v=Object(X.a)(d,2),p=v[0],g=v[1],E=g.data,f=g.error,h=g.loading,b=Object(u.useCallback)((function(){p({variables:{username:c,password:o}})}),[p,c,o]);E&&E.createUserToken&&(t=E.createUserToken.token,localStorage.setItem("userToken",t),window.location.reload());var w=h?m.a.createElement(I.g,{color:"secondary"}):m.a.createElement(Me,{onClick:b,isDisabled:!c||!o,className:a});return m.a.createElement("div",{className:n},m.a.createElement(I.h,{margin:"normal",required:!0,fullWidth:!0,error:!!f},m.a.createElement(I.l,{htmlFor:"username"},"Username"),m.a.createElement(I.k,{id:"username",name:"username",autoComplete:"username",autoFocus:!0,value:c,onChange:l})),m.a.createElement(I.h,{margin:"normal",required:!0,fullWidth:!0,error:!!f},m.a.createElement(I.l,{htmlFor:"password"},"Password"),m.a.createElement(I.k,{name:"password",type:"password",id:"password",autoComplete:"current-password",value:o,onChange:s})),m.a.createElement(I.i,{control:m.a.createElement(I.f,{value:"remember",color:"primary"}),label:"Remember me"}),w)},Fe=a(72),qe=Be()((function(e){return Object(c.createStyles)({main:Object(Fe.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}})}))((function(e){var t=e.classes;return m.a.createElement("div",{className:t.main},m.a.createElement(I.o,{className:t.paper},m.a.createElement(I.a,{className:t.avatar},m.a.createElement($e.a,null)),m.a.createElement(I.p,{component:"h1",variant:"h5"},"Sign in"),m.a.createElement(De,{formClassname:t.form,submitButtonClassname:t.submit})))})),_e=function(e){var t=e.isAuthenticated;return m.a.createElement("div",null,m.a.createElement(j.a,null),m.a.createElement(Ae,null),t?m.a.createElement(he,null):m.a.createElement(qe,null))},Ge=Object(g.b)((function(e){return{isAuthenticated:O(e)}}))(_e),Ve=a(45),ze=a(141),Je={},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SESSION.SET_USER_TOKEN":return Object(r.a)({},e,{userToken:t.payload});default:return e}},Qe=function(){var e=Object(Ve.combineReducers)(Object(r.a)({},n)),t=Object(ze.composeWithDevTools)();return Object(Ve.createStore)(e,t)},He=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Xe(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Ze=Qe(),et=localStorage.getItem("userToken"),tt=Object(s.b)({uri:"/graphql"}),at=Object(o.a)((function(e,t){var a=t.headers;return{headers:Object(r.a)({},a,{authorization:et?"Bearer ".concat(et):""})}})),nt=new i.a({link:at.concat(tt),cache:new l.a});et&&Ze.dispatch({type:"SESSION.SET_USER_TOKEN",payload:et}),p.a.render(m.a.createElement(d.a,{client:nt},m.a.createElement(c.MuiThemeProvider,{theme:w},m.a.createElement(g.a,{store:Ze},m.a.createElement(Ge,null)))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location.toString()).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");He?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Xe(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):Xe(e)}))}}()}},[[225,1,2]]]);
//# sourceMappingURL=main.e6e66c6d.chunk.js.map